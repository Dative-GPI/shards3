var P=Object.defineProperty;var y=(i,t,s)=>t in i?P(i,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[t]=s;var e=(i,t,s)=>y(i,typeof t!="symbol"?t+"":t,s);import{C as v}from"./base-BcjN1n8z.js";import{a as h,b as u,c,D as g,W as w}from"./dashboardTranslation-DOhfK_tb.js";import{P as I}from"./pathCrumb-Db-cq5HI.js";import{S as r}from"./serviceFactory-Bd5jifNi.js";import{C as n}from"./composableFactory-BJn24iiy.js";class E{constructor(t){e(this,"hiddenCode");e(this,"startDate");e(this,"endDate");e(this,"useAutoRefresh");e(this,"autoRefresh");this.hiddenCode=t.hiddenCode,this.startDate=t.startDate,this.endDate=t.endDate,this.useAutoRefresh=t.useAutoRefresh,this.autoRefresh=t.autoRefresh}}class S{constructor(t){e(this,"hiddenCode");e(this,"singleEntity");e(this,"selectedEntities");e(this,"entitiesFilters");e(this,"entitiesIds");this.hiddenCode=t.hiddenCode,this.singleEntity=t.singleEntity,this.selectedEntities=t.selectedEntities,this.entitiesFilters=t.entitiesFilters,this.entitiesIds=t.entitiesIds.slice()}}class V{constructor(t){e(this,"hiddenCode");e(this,"value");this.hiddenCode=t.hiddenCode,this.value=t.value}}class b{constructor(t){e(this,"id");e(this,"organisationId");e(this,"dashboardOrganisationTypeId");e(this,"dashboardOrganisationTypeLabel");e(this,"folderId");e(this,"folderLabel");e(this,"folderIcon");e(this,"imageId");e(this,"label");e(this,"code");e(this,"icon");e(this,"tags");e(this,"colors");e(this,"dashboardId");e(this,"scope");this.id=t.id,this.organisationId=t.organisationId,this.dashboardOrganisationTypeId=t.dashboardOrganisationTypeId,this.dashboardOrganisationTypeLabel=t.dashboardOrganisationTypeLabel,this.folderId=t.folderId,this.folderLabel=t.folderLabel,this.folderIcon=t.folderIcon,this.imageId=t.imageId,this.label=t.label,this.code=t.code,this.icon=t.icon,this.tags=t.tags.slice(),this.colors=t.colors.slice(),this.dashboardId=t.dashboardId,this.scope=t.scope}}class a extends b{constructor(s){super(s);e(this,"labelDefault");e(this,"translations");e(this,"path");e(this,"widgets");e(this,"defaultEntityPresetCode");e(this,"defaultDatePresetCode");e(this,"defaultVariableCode");e(this,"defaultDatePresets");e(this,"defaultEntityPresets");e(this,"defaultVariables");e(this,"overrideEntityPresetCode");e(this,"overrideDatePresetCode");e(this,"overrideVariableCode");e(this,"overrideDatePresets");e(this,"overrideEntityPresets");e(this,"overrideVariables");this.labelDefault=s.labelDefault,this.path=s.path.map(d=>new I(d)).sort((d,o)=>o.index-d.index),this.translations=s.translations.map(d=>new g(d)),this.widgets=s.widgets.map(d=>new w(d)),this.overrideEntityPresetCode=s.overrideEntityPresetCode,this.overrideDatePresetCode=s.overrideDatePresetCode,this.overrideVariableCode=s.overrideVariableCode,this.overrideDatePresets=s.overrideDatePresets.map(d=>new E(d)),this.overrideEntityPresets=s.overrideEntityPresets.map(d=>new S(d)),this.overrideVariables=s.overrideVariables.map(d=>new V(d)),this.defaultEntityPresetCode=s.defaultEntityPresetCode,this.defaultDatePresetCode=s.defaultDatePresetCode,this.defaultVariableCode=s.defaultVariableCode,this.defaultDatePresets=s.defaultDatePresets.map(d=>new h(d)),this.defaultEntityPresets=s.defaultEntityPresets.map(d=>new u(d)),this.defaultVariables=s.defaultVariables.map(d=>new c(d))}get entityPresetCode(){return this.overrideEntityPresetCode??this.defaultEntityPresetCode}get datePresetCode(){return this.overrideDatePresetCode??this.defaultDatePresetCode}get variableCode(){return this.overrideVariableCode??this.defaultVariableCode}get datePresets(){return this.defaultDatePresets.map(s=>{const d=this.overrideDatePresets.find(o=>o.hiddenCode===s.hiddenCode);return d?new h({...s,...d}):s})}get entityPresets(){return this.defaultEntityPresets.map(s=>{const d=this.overrideEntityPresets.find(o=>o.hiddenCode===s.hiddenCode);return d?new u({...s,...d}):s})}get variables(){return this.defaultVariables.map(s=>{const d=this.overrideVariables.find(o=>o.hiddenCode===s.hiddenCode);return d?new c({...s,...d}):s})}}const f=()=>`${v()}/dashboard-shallows`,l=i=>`${f()}/${encodeURIComponent(i)}`,L=i=>`${l(i)}/folder`,C=new r("dashboardShallow",a).createComplete(f,l,b),D=new r("dashboardShallow",a).create(i=>i.build(i.addNotify(t=>({...r.addCustom("duplicate",(s,d)=>s.patch(l(d)),s=>{const d=new a(s);return t.notify("update",d),d}),...r.addCustom("changeFolder",(s,d,o)=>s.put(L(d),o),s=>{const d=new a(s);return t.notify("update",d),d})})))),H=n.get(C),U=n.getMany(C);n.custom(D.duplicate);n.custom(D.changeFolder);export{H as a,U as u};
